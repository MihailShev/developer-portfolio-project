import{r as u,a as f}from"./assets/render-function-DdwGxKGn.js";import{a as v}from"./assets/vendor-oEpPu-Yq.js";const s=document.querySelector(".message-container"),c=document.querySelector(".js-user-message-inp"),w=document.querySelector(".inner-form-svg"),b=document.querySelector(".js-user-send-btn"),p=document.querySelector(".loader-chat-wrap"),g=document.querySelector(".loader-container-site"),L=()=>{g.style.display="block"},S=()=>{g.style.display="none"};window.addEventListener("load",()=>{S()});document.addEventListener("DOMContentLoaded",()=>{L()});const T=()=>{p.style.display="none"},k=()=>{p.style.display="block"};let n=window.speechSynthesis,a=null;const h=()=>{(n.speaking||n.pending)&&n.cancel()},E=()=>{const t=n.getVoices();return t[1]||t[0]};n.onvoiceschanged=()=>{console.log("Доступные голоса:",n.getVoices())};const j=t=>{(n.speaking||n.pending)&&n.cancel(),a=new SpeechSynthesisUtterance(t),a.voice=E(),n.speak(a)},q=async t=>{try{await navigator.clipboard.writeText(t)}catch(e){console.log(e)}};window.addEventListener("beforeunload",h);window.addEventListener("visibilitychange",()=>{document.hidden&&h()});let o="";const m=()=>b.disabled=c.value.trim()==="";c.addEventListener("input",()=>(o=c.value.trim(),m(),o));const x=t=>{t.preventDefault();const e=t.target.closest("button");e&&(e.classList.contains("js-user-send-btn")&&o!==""&&(s.insertAdjacentHTML("beforeend",u(o)),s.scrollTop=s.scrollHeight,y(o),c.value="",o="",m()),e.classList.contains("js-user-talt-btn")&&H())};w.addEventListener("click",x);const C=t=>{var d;const e=t.target.closest("button");if(!e)return;const i=(d=e.closest(".message-ai"))==null?void 0:d.querySelector(".message-text");if(!i)return;const l=i.textContent.trim();e.classList.contains("btn-speech")&&j(l),e.classList.contains("btn-copy")&&q(l)};s.addEventListener("click",C);const M=window.SpeechRecognition||window.webkitSpeechRecognition,r=new M;r.interimResults=!1;r.lang="en";const H=()=>r.start();r.onresult=t=>{const e=t.results[0][0].transcript;s.insertAdjacentHTML("beforeend",u(e)),s.scrollTop=s.scrollHeight,y(e)};const y=async t=>{try{k();const e=await v.post("undefined",{model:"mistralai/Mistral-7B-Instruct-v0.1",messages:[{role:"user",content:t}]},{headers:{Authorization:"Bearer undefined","Content-Type":"application/json"}});s.insertAdjacentHTML("beforeend",f(e.data.choices[0].message.content)),s.scrollTop=s.scrollHeight;return}catch(e){console.error(e.response?e.response.data:e.message)}finally{T()}};
//# sourceMappingURL=chat-ai.js.map
